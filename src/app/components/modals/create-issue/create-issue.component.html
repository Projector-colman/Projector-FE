<div class="form-style-2">
  <div class="form-style-2-heading">Create Issue</div>
  <form [formGroup]="issueForm" (ngSubmit)="onSubmit()">

  <label><span>Project: <span class="required">*</span></span>
    <select class="select-field" (change)="changeProject($event)" formControlName="project">
      <option value="" disabled>Choose your project</option>
      <option *ngFor="let proj of allProjects | async" [ngValue]="proj.id">{{ proj.name }}</option>
   </select>
  </label>

  <label><span>Issue Type: <span class="required">*</span></span>
    <select class="select-field" (change)="changeIssueType($event)" formControlName="issueType">
      <option *ngFor="let issueType of issueTypes" [ngValue]="issueType">{{ issueType }}</option>
   </select>
  </label>

  <label><span>Name: <span class="required">*</span></span><input type="text" class="input-field" formControlName="name" value="" /></label>
  <label><span>Reporter: <span class="required">*</span></span><input type="text" class="input-field" formControlName="reporter" value="" /></label>
  <label><span>Description: <span class="required">*</span></span><textarea formControlName="description" class="textarea-field"></textarea></label>
  
  <label *ngIf='this.selectedIssueType === "Story"'><span>Priority: <span class="required">*</span></span>
    <select class="select-field" (change)="changePriority($event)" formControlName="priority">
      <option *ngFor="let priority of priorityTypes" [ngValue]="priority">{{ priority }}</option>
   </select>
  </label>

  <label><span>Assignee: </span>
    <select class="select-field" (change)="changeAssignee($event)" formControlName="project">
      <option *ngFor="let user of projectUsers | async" [ngValue]="user.id">{{ user.name }}</option>
   </select>
  </label>

  <label *ngIf='this.selectedIssueType === "Story"'><span>Epic Link: <span class="required">*</span></span><input type="text" class="input-field" formControlName="epicLink" value="" /></label>
  <label><div class="error" *ngIf="submitted && !isFormValid">*Missing information</div></label>

  <button type="submit" [disabled]="this.issueForm.invalid">Create</button>
  </form>
  </div>